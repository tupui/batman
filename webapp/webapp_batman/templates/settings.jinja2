{% extends "layout.jinja2" %}

{% block head %}
<!-- Form CSS -->
<link rel="stylesheet"
      href="{{request.static_url('deform:static/css/bootstrap.min.css')}}"
      type="text/css" media="screen" charset="utf-8"/>
<link rel="stylesheet"
      href="{{request.static_url('deform:static/css/form.css')}}"
      type="text/css"/>

<!-- Deform CSS -->
{% for reqt in reqts['css'] %}
<link rel="stylesheet" type="text/css"
          href="{{request.static_url(reqt)}}"/>
{% endfor %}

<!-- Deform JS -->
<script src="{{request.static_url('deform:static/scripts/jquery-2.0.3.min.js')}}"
        type="text/javascript"></script>
<script src="{{request.static_url('deform:static/scripts/bootstrap.min.js')}}"
        type="text/javascript"></script>

{% for reqt in reqts['js'] %}
<script src="{{request.static_url(reqt)}}"
            type="text/javascript"></script>
{% endfor %}


<style>
/* Affix positionning */
.affix {
    top: 20px;
}
</style>
{% endblock head %}


{% block content %}
<div class="row">

  <nav class="col-sm-2">
      <ul class="nav nav-pills nav-stacked" data-spy="affix" data-offset-top="205">
        <li class="active"><a href="#form1">Space</a></li>
        <li><a href="#form2">Surrogate</a></li>
      </ul>
    </nav>

  <div class="col-md-5">
    <div class="content">
    <h1>Settings</h1>
    <p>You can either upload existing settings or fill the form.</p>

    <form method="post" enctype="multipart/form-data">
      <input type="file" name="settings" accept="application/json">
      <input type="submit">
    </form>

    {{form | safe}}

    {% if form_completed %}
      <form method="post">
          <button type="submit" name="run_batman" class="btn btn-danger">Launch</button>
      </form>
    {% else %}
      <form method="post">
          <p>You must validate all items before</p>
          <button type="submit" name="run_batman" class="btn btn-danger disabled">Launch</button>
      </form>
    {% endif %}

    </div>
  </div>
  <div class="col-md-5">
    <h2>Design of Experiment</h2>
    {% if script_plotly %}
      <p>Based on your space definition, the space of parameter is described as follow.
      You can update the space if needed.
      </p>
      {{script_plotly | safe}}
      <p>C2 Discrepancy is: {{discrepancy | safe}}</p>
    {% else %}
      <div class="alert alert-info">
        <strong>Info!</strong> Fill in the space settings and submit to see the DoE.
      </div>
    {% endif %}

  </div>
</div>
{% endblock content %}

